function createJoystick(n){const t=new Vue({el:n.elementId,data:{angle:0,distance:0,color:n.color,name:n.name,touchDown:!1},mounted:function(){const t=this;nipplejs.create({zone:this.$el,color:this.color}).on("added",function(i,r){r.on("move",function(n,i){t.angle=i.angle.radian;t.distance=i.distance});r.on("start",function(){t.touchDown=!0;n.startCallback&&n.startCallback()});r.on("end",function(){t.touchDown=!1;n.endCallback&&n.endCallback()})})},watch:{touchDown:function(){n.socket.send(JSON.stringify({joystickType:this.name,MessageType:this.touchDown?"start":"stop"}))}}});return t.$watch(function(){return this.angle+this.distance},function(){n.socket.send(JSON.stringify({joystickType:this.name,angle:this.angle,MessageType:"movement",distance:this.distance}))}),t}function createServerConnection(){const t=`ws://${document.domain}:${location.port}/ws`;var n=new WebSocket(t);return window.onbeforeunload=function(){n.onclose=function(){};n.close()},n}